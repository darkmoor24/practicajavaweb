(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62],{64338:function(e,o,r){Promise.resolve().then(r.bind(r,3379))},3379:function(e,o,r){"use strict";r.r(o),r.d(o,{default:function(){return page}});var t=r(57437),a=r(17483),d=r(2265),l=r(86520),s=r(36505),c=r(42824),i=r(91851),injectCSS_injectCSS=e=>{let o=document.createElement("link");o.rel="stylesheet",o.href=e,window.document.head.appendChild(o)},n=r(35843),u=r(45421),SwitchTheme_SwitchTheme=()=>{var e;let o=(0,n.ZP)(u.Z)(e=>{let{theme:o}=e;return{width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& .MuiSwitch-thumb:before":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="'.concat(encodeURIComponent("#fff"),'" d="M4.2 2.5l-.7 1.8-1.8.7 1.8.7.7 1.8.6-1.8L6.7 5l-1.9-.7-.6-1.8zm15 8.3a6.7 6.7 0 11-6.6-6.6 5.8 5.8 0 006.6 6.6z"/></svg>\')')},"& + .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===o.palette.mode?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:"dark"===o.palette.mode?"#003892":"#001e3c",width:32,height:32,"&:before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="'.concat(encodeURIComponent("#fff"),'" d="M9.305 1.667V3.75h1.389V1.667h-1.39zm-4.707 1.95l-.982.982L5.09 6.072l.982-.982-1.473-1.473zm10.802 0L13.927 5.09l.982.982 1.473-1.473-.982-.982zM10 5.139a4.872 4.872 0 00-4.862 4.86A4.872 4.872 0 0010 14.862 4.872 4.872 0 0014.86 10 4.872 4.872 0 0010 5.139zm0 1.389A3.462 3.462 0 0113.471 10a3.462 3.462 0 01-3.473 3.472A3.462 3.462 0 016.527 10 3.462 3.462 0 0110 6.528zM1.665 9.305v1.39h2.083v-1.39H1.666zm14.583 0v1.39h2.084v-1.39h-2.084zM5.09 13.928L3.616 15.4l.982.982 1.473-1.473-.982-.982zm9.82 0l-.982.982 1.473 1.473.982-.982-1.473-1.473zM9.305 16.25v2.083h1.389V16.25h-1.39z"/></svg>\')')}},"& .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===o.palette.mode?"#8796A5":"#aab4be",borderRadius:10}}});return(0,t.jsx)(o,{defaultChecked:(null===(e=window.document.querySelector("html"))||void 0===e?void 0:e.getAttribute("data-bs-theme"))==="dark",onChange:(e,o)=>{var r;null===(r=window.document.querySelector("html"))||void 0===r||r.setAttribute("data-bs-theme",o?"dark":"light"),injectCSS_injectCSS(o?"//cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@4/dark.css":"//cdn.jsdelivr.net/npm/@sweetalert2/theme-minimal/minimal.css")}})},CustomNavbar_CustomNavbar=e=>{let{title:o}=e;return(0,t.jsx)(s.Z,{children:(0,t.jsxs)(c.Z,{fluid:!0,children:[(0,t.jsxs)(s.Z.Brand,{href:"./listado-productos",children:[(0,t.jsx)("i",{className:"fi fi-ss-box-open-full"})," ",o]}),(0,t.jsx)(s.Z.Offcanvas,{placement:"end",children:(0,t.jsx)(i.Z.Body,{className:"justify-content-end",children:(0,t.jsx)(SwitchTheme_SwitchTheme,{})})})]})})},h=r(30606),p=r(43226),m=r(33948),x=r(3857),v=r(94434),g=r(38597),P=r(73572),j=r(91782),f=r(97654),localStorage_validateLocalStorageItemExistence=e=>null!==localStorage.getItem(e);let getApiUrl=()=>{let e="http://localhost:8080/api/v1";return localStorage.setItem("BASE_API_URL",e),e};var httpRequests_httpRequest=e=>{let{url:o,method:r="GET",body:t}=e;return new Promise(async(e,a)=>{try{let d="";d=localStorage_validateLocalStorageItemExistence("BASE_API_URL")?localStorage.getItem("BASE_API_URL"):await getApiUrl();let l={method:r,headers:{Authorization:window.atob(""),"Content-Type":"application/json; charset=utf-8"}};void 0!==t&&(l.body=t);let s=await fetch("".concat(d,"/").concat(o),l),c=await s.json();200===c.code?e(c):a(c)}catch(e){a(e)}})},b={producto:"producto",proveedor:"proveedor",proveedorProducto:"proveedor-producto",tipoProducto:"tipo-producto"},Z={producto:{getProductos:"get-productos",deleteProducto:"delete-producto",addProducto:"add-producto",updateProducto:"update-producto"},proveedor:{getProveedores:"get-proveedores"},proveedorProducto:{getProveedoresProducto:"get-proveedores-producto"},tipoProducto:{getTiposProducto:"get-tipos-producto"}};let getTiposProducto=()=>new Promise(async(e,o)=>{try{let o=await httpRequests_httpRequest({url:"".concat(b.tipoProducto,"/").concat(Z.tipoProducto.getTiposProducto)});e(o)}catch(e){o(e)}});var w=r(72759),y=r(80504);let addProducto=e=>new Promise(async(o,r)=>{try{let r=await httpRequests_httpRequest({url:"".concat(b.producto,"/").concat(Z.producto.addProducto),method:"POST",body:JSON.stringify(e)});o(r)}catch(e){r(e)}}),getProductos=(e,o)=>new Promise(async(r,t)=>{try{let t=await httpRequests_httpRequest({url:"".concat(b.producto,"/").concat(Z.producto.getProductos,"/").concat(e,"/").concat(window.btoa(o)),method:"GET"});r(t)}catch(e){t(e)}}),updateProducto=e=>new Promise(async(o,r)=>{try{let r=await httpRequests_httpRequest({url:"".concat(b.producto,"/").concat(Z.producto.updateProducto),method:"PUT",body:JSON.stringify(e)});o(r)}catch(e){r(e)}}),deleteProducto=e=>new Promise(async(o,r)=>{try{let r=await httpRequests_httpRequest({url:"".concat(b.producto,"/").concat(Z.producto.deleteProducto,"/").concat(e),method:"DELETE"});o(r)}catch(e){r(e)}});var C=r(16820),S=r.n(C),E=r(67342),A=r.n(E);let N=A()(S()),_=S().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timerProgressBar:!0,customClass:{container:"z-super-top",popup:"z-super-top"},didOpen:e=>{e.addEventListener("mouseenter",S().stopTimer),e.addEventListener("mouseleave",S().resumeTimer)}}),NotificacionSweetAlert=function(e,o){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;_.fire({timer:r,icon:e,title:o})},ModalSweetAlert=e=>new Promise(async(o,r)=>{try{let{isConfirmed:r,isDismissed:t}=await N.fire({allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1,width:950,...e});t&&o(!1),r&&o(!0)}catch(e){o(!1)}});var FormularioBusqueda_FormularioBusqueda=e=>{let{criteriosBusqueda:o,setCriteriosBusqueda:r,setProductos:l,setShowTable:s}=e,[i,n]=(0,d.useState)([]),handleSubmit=async e=>{e.preventDefault();let{idTipoProducto:r,clave:t}=o;if(0===r)return a.fn.error("Elige un Tipo de Producto");try{let{data:e,message:o}=await getProductos(r,t);if(e.length<1)return a.fn.error(o);NotificacionSweetAlert("success","".concat(e.length," Productos encontrados")),l(e),s(!0)}catch(e){console.log(e)}};return(0,d.useMemo)(()=>{let consultarTiposProducto=async()=>{try{if(0===i.length){let{data:e}=await getTiposProducto();n(e)}}catch(e){console.log("Error al consultar los tipos de producto: ",e)}};return consultarTiposProducto()},[]),(0,t.jsx)(j.Z,{onSubmit:handleSubmit,children:(0,t.jsx)(c.Z,{fluid:!0,children:(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(v.Z,{xs:5,children:(0,t.jsx)(f.Z,{controlId:"idTipoProducto",label:"Tipo de Producto",children:(0,t.jsxs)(j.Z.Select,{name:"idTipoProducto","aria-label":"Tipo de Producto",onChange:e=>{let{name:t,value:a}=e.target;r({...o,[t]:parseInt(a)})},children:[(0,t.jsx)("option",{value:"",children:"-- Elige una opci\xf3n --"}),i.map((e,o)=>(0,t.jsx)("option",{value:e.idTipoProducto,children:e.nombre},o))]})})}),(0,t.jsx)(v.Z,{xs:5,children:(0,t.jsx)(f.Z,{controlId:"clave",label:"Clave de Producto",children:(0,t.jsx)(j.Z.Control,{name:"clave",type:"text",placeholder:"Clave de Producto",onChange:e=>{let{name:t,value:a}=e.target;r({...o,[t]:""===a?"null":a})}})})}),(0,t.jsx)(v.Z,{align:"right",xs:2,children:(0,t.jsx)("div",{className:"d-grid gap-2 h-100",children:(0,t.jsxs)(P.Z,{variant:"primary",type:"submit",size:"lg",children:["Buscar ",(0,t.jsx)(y.G,{icon:w.wn1})]})})})]})})})},T=r(33457),k=r(30480),DataTableRecipient_DataTableRecipient=e=>{let{columnas:o,data:r,renderTopToolbar:a,renderRowActions:d,listaProveedores:l=!1}=e,s="No hay registros, agrega un ".concat(l?"nuevo proveedor":"nuevo producto"),c=(0,T.X0)({localization:{...k.X,noRecordsToDisplay:s,noResultsFound:s},columns:o,renderTopToolbar:a,data:r,enableRowActions:!0,positionActionsColumn:"last",renderRowActions:d});return(0,t.jsx)(T.P2,{table:c})},R=r(96507),I=r(52653),M=r(1935),B=r(97800),numberCommaSeparator_numberCommaSeparator=e=>{try{return e.toFixed(2).toString().replace(/(\d+)(\d{3})/,"$1,$2")}catch(e){return console.log("error getPrecioFormateado",e),0}},ResultadosBusqueda_ResultadosBusqueda=e=>{let{productos:o,funcionesCRUD:r}=e,{handleAgregarProducto:a,handleEditarProducto:l,handleEliminarProducto:s}=r,i=(0,d.useMemo)(()=>[{accessorKey:"nombre",header:"Producto"},{accessorKey:"clave",header:"Clave de Producto"},{accessorKey:"costo",header:"Costo de Producto",Cell:e=>{let{cell:o}=e;return"$ ".concat(numberCommaSeparator_numberCommaSeparator(o.row.original.costo))}},{accessorKey:"estatus",header:"Activo",Cell:e=>{let{cell:o}=e;return(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("span",{children:o.row.original.estatus?(0,t.jsx)(y.G,{icon:w.LEp,color:"#28a745"}):(0,t.jsx)(y.G,{icon:w.NBC,color:"#dc3545"})})})}}],[]);return(0,t.jsx)(c.Z,{fluid:!0,children:(0,t.jsx)(g.Z,{children:(0,t.jsx)(v.Z,{children:(0,t.jsx)(DataTableRecipient_DataTableRecipient,{columnas:i,data:o,renderTopToolbar:e=>{let{table:o}=e;return(0,t.jsx)(c.Z,{fluid:!0,className:"my-2",children:(0,t.jsx)(g.Z,{children:(0,t.jsx)(v.Z,{align:"right",children:(0,t.jsxs)(P.Z,{variant:"success",onClick:a,type:"button",children:["Agregar Producto ",(0,t.jsx)(y.G,{icon:w.XSk})]})})})})},renderRowActions:e=>{let{row:o,table:r}=e;return(0,t.jsxs)(R.Z,{sx:{display:"flex",flexWrap:"nowrap",gap:"8px"},children:[(0,t.jsx)(M.Z,{placement:"top",overlay:(0,t.jsx)(B.Z,{className:"z-super-top",children:"Editar Producto"}),children:(0,t.jsx)(I.Z,{color:"primary",id:o.original.idProducto,onClick:l,children:(0,t.jsx)(y.G,{icon:w.Xcf,color:"#128293"})})}),(0,t.jsx)(M.Z,{placement:"top",overlay:(0,t.jsx)(B.Z,{className:"z-super-top",children:"Eliminar Producto"}),children:(0,t.jsx)(I.Z,{color:"error",id:o.original.idProducto,onClick:s,children:(0,t.jsx)(y.G,{icon:w.$aW,color:"#A51D2A"})})})]})}})})})})},EliminarProducto_EliminarProducto=e=>{let{producto:o,setProductoEliminado:r}=e,handleDeleteProducto=async()=>{try{await deleteProducto(null==o?void 0:o.idProducto),r(!0),NotificacionSweetAlert("success","El producto se elimin\xf3 con \xe9xito")}catch(e){console.log("Error al eliminar al empleado seleccionado: ",e),NotificacionSweetAlert("error","No se pudo eliminar el producto.")}};return(0,t.jsxs)(c.Z,{fluid:!0,className:"text-center",children:[(0,t.jsx)("h3",{children:"\xbfEst\xe1s seguro de eliminar este producto?"}),(0,t.jsx)("p",{children:"Se eliminar\xe1n el producto y todos los proveedores asociados"}),(0,t.jsxs)(g.Z,{className:"pt-3",children:[(0,t.jsx)(v.Z,{children:(0,t.jsx)(P.Z,{variant:"success",onClick:handleDeleteProducto,children:"S\xed, eliminar"})}),(0,t.jsx)(v.Z,{children:(0,t.jsx)(P.Z,{variant:"danger",onClick:()=>{NotificacionSweetAlert("info","Acci\xf3n cancelada")},children:"No, cancelar"})})]})]})},q=r(22079),F=r(76500),z=r(34989),L=r(33533),D=r(8088),U=r(29639),G=r(67070),V=r(40182),O=r(26931),EliminarProveedor_EliminarProveedor=e=>{let{eliminarProveedor:o,swalRef:r}=e,handleDeleteProveedor=async()=>{try{o(),r.close(),a.fn.success("Proveedor eliminado de la lista a guardar")}catch(e){console.log("Error al eliminar al empleado seleccionado: ",e),a.fn.error("No se pudo eliminar el proveedor de la lista a guardar")}};return(0,t.jsxs)(c.Z,{fluid:!0,className:"text-center",children:[(0,t.jsx)("h3",{children:"\xbfEst\xe1s seguro de eliminar este proveedor?"}),(0,t.jsx)("p",{children:"Estos cambios no se ver\xe1n reflejados hasta que hagas clic en Guardar"}),(0,t.jsxs)(g.Z,{className:"pt-3",children:[(0,t.jsx)(v.Z,{children:(0,t.jsx)(P.Z,{variant:"success",onClick:handleDeleteProveedor,children:"S\xed, eliminar de la lista"})}),(0,t.jsx)(v.Z,{children:(0,t.jsx)(P.Z,{variant:"danger",onClick:()=>{a.fn.info("Acci\xf3n cancelada"),r.close()},children:"No, cancelar"})})]})]})};let getProveedores=()=>new Promise(async(e,o)=>{try{let o=await httpRequests_httpRequest({url:"".concat(b.proveedor,"/").concat(Z.proveedor.getProveedores)});e(o)}catch(e){o(e)}});var FormularioAddUpdProveedorProducto_FormularioAddUpdProveedorProducto=e=>{let{onClose:o,updateProveedoresList:r,proveedor:a}=e,[l,s]=(0,d.useState)(a),[i,n]=(0,d.useState)([]),handleInputChange=e=>{var o;let{name:r,value:t}=e.target,a=t;"costoProveedor"===r&&(a=Number(t.replace(/[^0-9.]/g,""))),o=a,s({...l,[r]:o})};(0,d.useMemo)(()=>{let consultarProveedores=async()=>{try{if(0===i.length){let{data:e}=await getProveedores();n(e)}}catch(e){console.log("Error al consultar los tipos de producto: ",e)}};return consultarProveedores()},[]);let handleUpdateProveedorProducto=async e=>{e.preventDefault();let{idProveedor:o,claveProveedor:t,costoProveedor:a}=l;if(0===o||0===a||""===t)return NotificacionSweetAlert("warning","Llena todos los campos para continuar",1500);r(l)};return(0,t.jsx)(c.Z,{fluid:!0,children:(0,t.jsx)(g.Z,{children:(0,t.jsxs)(v.Z,{children:[(0,t.jsxs)(p.Z,{variant:"overline",children:[0===l.idProveedor?(0,t.jsx)(t.Fragment,{children:"Agregar"}):(0,t.jsx)(t.Fragment,{children:"Editar"})," Proveedor"]}),(0,t.jsx)(f.Z,{controlId:"idProveedor",label:"Proveedor",className:"mb-3",children:(0,t.jsxs)(j.Z.Select,{value:l.idProveedor,name:"idProveedor","aria-label":"Proveedores disponibles",onChange:e=>{let{name:o,value:r}=e.target,t=i.find(e=>e.idProveedor===parseInt(r));s({...l,[o]:parseInt(r),nombre:(null==t?void 0:t.nombre)===void 0?"":t.nombre})},children:[(0,t.jsx)("option",{value:"",children:"-- Elige una opci\xf3n --"}),i.map((e,o)=>(0,t.jsx)("option",{value:e.idProveedor,children:e.nombre},o))]})}),(0,t.jsx)(f.Z,{controlId:"claveProveedor",label:"Clave de proveedor",className:"mb-3",children:(0,t.jsx)(j.Z.Control,{type:"text",placeholder:"Clave de proveedor",value:l.claveProveedor,name:"claveProveedor",onChange:handleInputChange})}),(0,t.jsx)(f.Z,{controlId:"costoProveedor",label:"Costo de proveedor",className:"mb-3",children:(0,t.jsx)(j.Z.Control,{type:"text",placeholder:"Costo de proveedor",value:l.costoProveedor,name:"costoProveedor",onChange:handleInputChange})}),(0,t.jsx)(c.Z,{fluid:!0,className:"px-0",children:(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsx)("div",{className:"d-grid gap-2",children:(0,t.jsxs)(P.Z,{variant:"success",type:"button",size:"lg",onClick:handleUpdateProveedorProducto,children:["Guardar ",(0,t.jsx)(y.G,{icon:w.r6l})]})})}),(0,t.jsx)(v.Z,{children:(0,t.jsx)("div",{className:"d-grid gap-2",children:(0,t.jsxs)(P.Z,{variant:"danger",type:"button",size:"lg",onClick:()=>o(),children:["Salir ",(0,t.jsx)(y.G,{icon:w.jLD})]})})})]})})]})})})},AgregarProveedor_AgregarProveedor=e=>{let{onClose:o,updateProveedoresList:r,proveedor:a,swalRef:d}=e;return(0,t.jsx)(FormularioAddUpdProveedorProducto_FormularioAddUpdProveedorProducto,{updateProveedoresList:r,proveedor:a,swalRef:d,onClose:o})},EditarProveedor_EditarProveedor=e=>{let{onClose:o,updateProveedoresList:r,proveedor:a,swalRef:d}=e;return(0,t.jsx)(FormularioAddUpdProveedorProducto_FormularioAddUpdProveedorProducto,{updateProveedoresList:r,proveedor:a,swalRef:d,onClose:o})};let K=(0,n.ZP)(e=>(0,t.jsx)(u.Z,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...e}))(e=>{let{theme:o}=e;return{width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:"dark"===o.palette.mode?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:"light"===o.palette.mode?o.palette.grey[100]:o.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:"light"===o.palette.mode?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:13,backgroundColor:"light"===o.palette.mode?"#E9E9EA":"#39393D",opacity:1,transition:o.transitions.create(["background-color"],{duration:500})}}}),X={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:1};var FormularioAddUpdProducto_FormularioAddUpdProducto=e=>{let{formValues:o,setFormValues:r,tiposProducto:a,proveedores:l}=e,{idProducto:s,nombre:i,clave:n,costo:u,estatus:h,idTipoProducto:m}=o,[x,b]=(0,d.useState)([]),[Z,C]=(0,d.useState)(!1),[S,E]=(0,d.useState)(),A=(0,d.useMemo)(()=>[{accessorKey:"nombre",header:"Proveedor"},{accessorKey:"claveProveedor",header:"Clave de Proveedor"},{accessorKey:"costoProveedor",header:"Costo de Proveedor",Cell:e=>{let{cell:o}=e;return"$ ".concat(numberCommaSeparator_numberCommaSeparator(o.row.original.costoProveedor))}}],[]),handleInputChange=e=>{var t;let{name:a,value:d}=e.target,l=d;"costo"===a&&(l=d.replace(/[^0-9.]/g,"")),t=l,r({...o,[a]:t})},handleAgregarEditarProveedor=async e=>{let{currentTarget:{id:o}}=e,r={idProducto:0,idProveedor:0,idProveedorProducto:0,nombre:"",claveProveedor:"",costoProveedor:0};if("add"!==o){let e=x.find(e=>e.idProveedorProducto===parseInt(o));console.log(e),void 0!==e&&(r=e)}let updateProveedoresList=e=>{let o=x.find(o=>o.idProveedorProducto===e.idProveedorProducto);if(void 0===o)return b([...x,e]),C(!1);let r=x.indexOf(o);x[r]=e,b([...x]),C(!1)};E("add"===o?(0,t.jsx)(AgregarProveedor_AgregarProveedor,{updateProveedoresList:updateProveedoresList,proveedor:r,swalRef:N,onClose:handleCloseModal}):(0,t.jsx)(EditarProveedor_EditarProveedor,{updateProveedoresList:updateProveedoresList,proveedor:r,swalRef:N,onClose:handleCloseModal})),C(!0)},handleEliminarProveedor=async e=>{let{currentTarget:o}=e,r=parseInt(o.id);ModalSweetAlert({title:"Eliminar Proveedor",icon:"warning",html:(0,t.jsx)(EliminarProveedor_EliminarProveedor,{eliminarProveedor:()=>{b(x.filter(e=>e.idProveedorProducto!==r))},swalRef:N}),customClass:{container:"z-super-top"},showConfirmButton:!1,showCloseButton:!1})},handleCloseModal=()=>{C(!1)};return(0,d.useEffect)(()=>{0===x.length&&b(l)},[]),(0,d.useEffect)(()=>{r({...o,proveedoresProducto:x})},[x]),(0,t.jsxs)(c.Z,{fluid:!0,className:"mb-5",children:[(0,t.jsx)(g.Z,{className:"mb-3 justify-content-end",children:(0,t.jsx)(v.Z,{xs:6,children:(0,t.jsx)(G.Z,{severity:"info",children:"Para guardar cualquier cambio, haga clic en el bot\xf3n Guardar."})})}),(0,t.jsx)(p.Z,{variant:"h5",gutterBottom:!0,children:"Datos del Producto"}),(0,t.jsx)("hr",{}),(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsx)(f.Z,{controlId:"nombre",label:"Nombre de producto",className:"mb-3",children:(0,t.jsx)(j.Z.Control,{type:"text",placeholder:"Nombre de producto",value:i,name:"nombre",onChange:handleInputChange,required:!0})})}),(0,t.jsx)(v.Z,{children:(0,t.jsx)(f.Z,{controlId:"clave",label:"Clave de producto",className:"mb-3",children:(0,t.jsx)(j.Z.Control,{type:"text",placeholder:"Clave de producto",value:n,name:"clave",onChange:handleInputChange,required:!0})})})]}),(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsx)(f.Z,{controlId:"idTipoProducto",label:"Tipo de Producto",children:(0,t.jsxs)(j.Z.Select,{value:m,name:"idTipoProducto","aria-label":"Tipo de Producto",onChange:e=>{let{name:t,value:a}=e.target;""!==t&&(""!==a||0!==parseInt(a))&&r({...o,[t]:parseInt(a)})},children:[(0,t.jsx)("option",{value:"",children:"-- Elige una opci\xf3n --"}),a.map((e,o)=>(0,t.jsx)("option",{value:e.idTipoProducto,children:e.nombre},o))]})})}),(0,t.jsx)(v.Z,{children:(0,t.jsx)(f.Z,{controlId:"costo",label:"Costo de producto",className:"mb-3",children:(0,t.jsx)(j.Z.Control,{type:"text",placeholder:"Costo de producto",value:u,name:"costo",onChange:handleInputChange,required:!0})})})]}),(0,t.jsx)(g.Z,{className:"mb-3",children:(0,t.jsx)(v.Z,{children:(0,t.jsx)(c.Z,{fluid:!0,className:"d-flex h-100",children:(0,t.jsx)(g.Z,{children:(0,t.jsx)(v.Z,{children:(0,t.jsx)(M.Z,{trigger:["hover","focus"],placement:"top",overlay:(0,t.jsx)(B.Z,{className:"z-super-top",children:"Cambiar estatus"}),children:(0,t.jsx)(V.Z,{className:"px-1",onChange:(e,t)=>{r({...o,estatus:t?1:0})},control:(0,t.jsx)(K,{checked:!!o.estatus}),label:"Estatus ".concat(o.estatus?"Activo":"In\xe1ctivo")})})})})})})}),(0,t.jsx)(p.Z,{variant:"h5",gutterBottom:!0,children:"Proveedores"}),(0,t.jsx)("hr",{}),(0,t.jsx)(g.Z,{children:(0,t.jsx)(v.Z,{children:(0,t.jsx)(DataTableRecipient_DataTableRecipient,{columnas:A,data:x,renderTopToolbar:e=>{let{table:o}=e;return(0,t.jsx)(c.Z,{fluid:!0,className:"my-2",children:(0,t.jsx)(g.Z,{children:(0,t.jsx)(v.Z,{align:"right",children:(0,t.jsxs)(P.Z,{id:"add",variant:"success",onClick:handleAgregarEditarProveedor,type:"button",children:["Agregar Proveedor ",(0,t.jsx)(y.G,{icon:w.XSk})]})})})})},renderRowActions:e=>{let{row:o,table:r}=e;return(0,t.jsxs)(R.Z,{sx:{display:"flex",flexWrap:"nowrap",gap:"8px"},children:[(0,t.jsx)(M.Z,{trigger:["hover","focus"],placement:"top",overlay:(0,t.jsx)(B.Z,{className:"z-super-top",children:"Editar Proveedor"}),children:(0,t.jsx)(I.Z,{color:"primary",id:o.original.idProveedorProducto,onClick:handleAgregarEditarProveedor,children:(0,t.jsx)(y.G,{icon:w.Xcf,color:"#128293"})})}),(0,t.jsx)(M.Z,{trigger:["hover","focus"],placement:"top",overlay:(0,t.jsx)(B.Z,{className:"z-super-top",children:"Eliminar Proveedor"}),children:(0,t.jsx)(I.Z,{color:"error",id:o.original.idProveedorProducto,onClick:handleEliminarProveedor,children:(0,t.jsx)(y.G,{icon:w.$aW,color:"#A51D2A"})})})]})},listaProveedores:!0})})}),(0,t.jsx)(O.Z,{open:Z,onClose:handleCloseModal,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,t.jsxs)(R.Z,{sx:X,children:[" ",S," "]})})]})},AgregarProducto_AgregarProducto=e=>{let{formValues:o,setFormValues:r,tiposProducto:a}=e;return(0,t.jsx)(FormularioAddUpdProducto_FormularioAddUpdProducto,{formValues:o,setFormValues:r,tiposProducto:a,proveedores:[]})},EditarProducto_EditarProducto=e=>{let{formValues:o,setFormValues:r,tiposProducto:a,callback:l}=e,[s,c]=(0,d.useState)(o.proveedoresProducto);return(0,t.jsx)(FormularioAddUpdProducto_FormularioAddUpdProducto,{formValues:o,setFormValues:r,tiposProducto:a,proveedores:s})};let $=(0,d.forwardRef)(function(e,o){return(0,t.jsx)(D.Z,{direction:"up",ref:o,...e})});var FullScreenDialogAgregarEditarProducto_FullScreenDialogAgregarEditarProducto=e=>{let{open:o,setOpen:r,producto:l,setProductoAgregadoOEditado:s}=e,[i,n]=(0,d.useState)(l),[u,h]=(0,d.useState)([]),[m,x]=(0,d.useState)(!1);(0,d.useMemo)(()=>{let consultarTiposProducto=async()=>{try{if(0===u.length){let{data:e}=await getTiposProducto();h(e)}}catch(e){console.log("Error al consultar los tipos de producto: ",e)}};return consultarTiposProducto()},[]);let handleSubmit=async e=>{e.preventDefault();try{let e={...i,costo:Number(i.costo)},{idProducto:o,clave:t,costo:d,nombre:c}=e;x(!0);try{0===o?await addProducto(e):(console.log(e),await updateProducto(e))}catch(e){return console.log("Error al agregar o actualizar el producto: ",e),x(!1),NotificacionSweetAlert("error",null==e?void 0:e.message,3500)}r(!1),x(!1),s(!0),a.fn.success(0===l.idProducto?"Producto agregado exitosamente":"Producto actualizado exitosamente")}catch(e){var o;console.log("error al agregar el producto"),r(!1),ModalSweetAlert({title:"Algo sucedi\xf3 al agregar el producto, vuelve a intentar",icon:"error",html:(0,t.jsx)(p.Z,{className:(null===(o=window.document.querySelector("html"))||void 0===o?void 0:o.getAttribute("data-bs-theme"))==="dark"?"text-white":"text-black",variant:"h5",children:null==e?void 0:e.message}),showConfirmButton:!0,showCloseButton:!0,confirmButtonText:"Cerrar",confirmButtonColor:"#0d6efd"})}};return(0,t.jsx)("div",{children:(0,t.jsx)(q.Z,{fullScreen:!0,open:o,TransitionComponent:$,children:(0,t.jsxs)(j.Z,{onSubmit:handleSubmit,children:[(0,t.jsx)(F.Z,{sx:{position:"relative"},children:(0,t.jsxs)(z.Z,{children:[(0,t.jsx)(M.Z,{trigger:["hover","focus"],placement:"bottom",overlay:(0,t.jsx)(B.Z,{className:"z-super-top",children:"Salir sin guardar"}),children:(0,t.jsx)(I.Z,{edge:"start",color:"inherit",onClick:()=>r(!1),"aria-label":"close",children:(0,t.jsx)(L.Z,{})})}),(0,t.jsxs)(p.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:[0===l.idProducto?(0,t.jsx)(t.Fragment,{children:"Agregar"}):(0,t.jsx)(t.Fragment,{children:"Editar"})," Producto"]}),(0,t.jsx)(P.Z,{type:"submit",variant:"success",children:m?(0,t.jsxs)(t.Fragment,{children:["Guardando ",(0,t.jsx)(U.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),(0,t.jsx)("span",{className:"visually-hidden",children:"Guardando..."})]}):(0,t.jsxs)(t.Fragment,{children:["Guardar ",(0,t.jsx)(y.G,{icon:w.r6l})]})})]})}),(0,t.jsx)(c.Z,{fluid:!0,className:"mt-4",children:(0,t.jsx)(g.Z,{children:(0,t.jsx)(v.Z,{children:0===l.idProducto?(0,t.jsx)(AgregarProducto_AgregarProducto,{formValues:i,setFormValues:n,tiposProducto:u}):(0,t.jsx)(EditarProducto_EditarProducto,{formValues:i,setFormValues:n,tiposProducto:u})})})})]})})})};let getProveedoresProducto=e=>new Promise(async(o,r)=>{try{let r=await httpRequests_httpRequest({url:"".concat(b.proveedorProducto,"/").concat(Z.proveedorProducto.getProveedoresProducto,"/").concat(e)});o(r)}catch(e){r(e)}});var BuscarProducto_BuscarProducto=()=>{let[e,o]=(0,d.useState)(!1),[r,a]=(0,d.useState)({idTipoProducto:0,clave:"null"}),[l,s]=(0,d.useState)([]),i={idProducto:0,nombre:"",clave:"",costo:0,estatus:0,idTipoProducto:r.idTipoProducto,proveedoresProducto:[]},[n,u]=(0,d.useState)(i),[P,j]=(0,d.useState)(!1),[f,b]=(0,d.useState)(!1),[Z,w]=(0,d.useState)(!1),handleAgregarProducto=async e=>{let{currentTarget:r}=e;u(n),o(!0)},handleEditarProducto=async e=>{let{currentTarget:r}=e;try{let e=parseInt(r.id),{data:t}=await getProveedoresProducto(e),a=i,d=null==l?void 0:l.find(o=>(null==o?void 0:o.idProducto)===e);void 0!==d&&(a={...d,proveedoresProducto:t},u(a||n),o(!0))}catch(e){console.log("error al consultar los proveedores del producto: ",e)}},handleEliminarProducto=async e=>{let{currentTarget:o}=e,r=parseInt(o.id),a=l.find(e=>e.idProducto===r);await ModalSweetAlert({title:"Eliminar Producto",icon:"warning",html:(0,t.jsx)(EliminarProducto_EliminarProducto,{setProductoEliminado:b,producto:a}),showConfirmButton:!1,showCloseButton:!0})};(0,d.useEffect)(()=>{if(P||f){let refetchProductos=async()=>{try{let{data:e}=await getProductos(r.idTipoProducto,r.clave);s(e),j(!1),b(!1)}catch(e){console.log("error al reconsultar los productos: ",e)}};refetchProductos()}},[P,f]),(0,d.useEffect)(()=>{e||u(i)},[e]);let getTheme=()=>{var e;return null===(e=window.document.querySelector("html"))||void 0===e?void 0:e.getAttribute("data-bs-theme")},[y,C]=(0,d.useState)((0,h.Z)({palette:{mode:getTheme()}}));return(0,d.useLayoutEffect)(()=>{let e=document.querySelector("html");null==e||e.addEventListener("change",e=>{C((0,h.Z)({palette:{mode:getTheme()}}))})},[]),(0,t.jsx)(c.Z,{fluid:!0,className:"h-100",children:(0,t.jsx)(g.Z,{className:"mt-3",children:(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(p.Z,{variant:"h6",children:"Buscar Producto"}),(0,t.jsx)("hr",{}),(0,t.jsx)(p.Z,{variant:"subtitle1",className:"my-3 ms-3",children:"Puedes buscar productos por Tipo, o por Tipo y Clave"}),(0,t.jsx)(FormularioBusqueda_FormularioBusqueda,{criteriosBusqueda:r,setCriteriosBusqueda:a,setProductos:s,setShowTable:w}),(0,t.jsxs)(m.Z,{theme:y,children:[(0,t.jsx)(x.ZP,{}),Z&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{}),(0,t.jsx)(p.Z,{className:"mb-4",variant:"h6",children:"Producto(s) encontrados"}),(0,t.jsx)(ResultadosBusqueda_ResultadosBusqueda,{productos:l,funcionesCRUD:{handleAgregarProducto,handleEditarProducto,handleEliminarProducto}})]}),e&&(0,t.jsx)(FullScreenDialogAgregarEditarProducto_FullScreenDialogAgregarEditarProducto,{open:e,setOpen:o,producto:n,setProductoAgregadoOEditado:j})]})]})})})},ListadoProductos_ListadoProductos=()=>{let[e,o]=(0,d.useState)(!0);return(0,d.useEffect)(()=>{setTimeout(()=>o(!e),500)},[]),(0,t.jsxs)(t.Fragment,{children:[e&&(0,t.jsx)(l.Z,{subtle:!0}),!e&&(0,t.jsxs)("main",{className:"animate__animated animate__fadeIn",children:[(0,t.jsx)(CustomNavbar_CustomNavbar,{title:"Listado de Productos"}),(0,t.jsx)(BuscarProducto_BuscarProducto,{})]})]})},page=()=>(0,t.jsxs)("main",{children:[(0,t.jsx)(ListadoProductos_ListadoProductos,{}),(0,t.jsx)(a.mh,{})]})},86520:function(e,o,r){"use strict";var t=r(57437);r(2265);var a=r(29639);o.Z=e=>{let{subtle:o=!1}=e;return(0,t.jsx)("div",{className:"loader",children:(0,t.jsx)("div",{className:"loader-container",children:o?(0,t.jsx)(a.Z,{animation:"border",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,t.jsx)("span",{className:"loader-spinner"})})})}}},function(e){e.O(0,[676,712,876,883,971,472,744],function(){return e(e.s=64338)}),_N_E=e.O()}]);